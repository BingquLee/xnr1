<!DOCTYPE html>
<html lang="en">
<head>
    <!-- head标签开始 -->
    {% block head_meta %}
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta HTTP-EQUIV="pragma" CONTENT="no-cache">
    <meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
    <meta HTTP-EQUIV="expires" CONTENT="0">
    {% block title %}<title></title>{% endblock %}
    {% endblock %}
    <!-- head标签结束 -->

    <!-- css标签 -->
    {% block css %}
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-table.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" href="/static/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/css/public_nav.css">
    <style>
        #choosePerson .demo-label{width: auto!important;}
    </style>
    {% endblock %}
    <!-- css结束 -->

    <!-- 自己的css -->
    {% block my_css %}
    {% endblock %}
</head>
<body>
<!-- 导航开始 -->

{% block header %}
<div id="nav">
    <div class="nav_top">
        <h4 style="color:#373737;">虚拟人指挥管理系统</h4>
        <div id="LL">
            <ul>
                <li id="personal"><i class="icon icon-github-alt"></i>我的虚拟人</li>
                <li id="control"><i class="icon icon-cogs"></i>操作控制</li>
                <li id="info"><i class="icon icon-eye-open"></i>信息监测</li>
                <li id="monitor"><i class="icon icon-warning-sign"></i>预警监控</li>
                <li id="knowledge"><i class="icon icon-user-md"></i>虚拟人定制</li>
                <li id="reported"><i class="icon icon-sitemap"></i>行为评估</li>
                <li id="reportedmange"><i class="icon icon-share"></i>上报管理</li>
                <li id="knowledgebase"><i class="icon icon-key"></i>知识库管理</li>
                <li id="system"><i class="icon icon-inbox"></i>系统管理</li>
            </ul>
        </div>

    </div>
    <div class="nav_bottom">
        <ul class="list">
            <li class="main_li" id="backHome">
                <a class="list_one li_a">
                    <i class="icon icon-home"></i>&nbsp;首页
                </a>
            </li>
            <div class="behind" style="float: left;"></div>
        </ul>
        <div class="btn-group loadingUser">
            <button type="button" data-toggle="dropdown" aria-haspopup="true" title="登录用户"
                    aria-expanded="false" style="background:transparent;color: black;">
                <span class="icon icon-user"></span> <a id="login_user">admin@qq.com</a>&nbsp;&nbsp;
            </button>
            <span class="xnrShowHide"><b style="color:#333;">虚拟人：</b> <a class="nav_name"></a> <a class="nav_type"></a></span>
            <ul class="dropdown-menu">
                <!-- <li><a href="#"><i class="icon-pencil"></i> 编辑</a></li>
                <li><a href="#"><i class="icon-trash"></i> 删除</a></li> -->
                <li class="current"><a href="#"><i class="icon-map-marker"></i> <span>微博虚拟人</span></a></li>
                <li class="change"><a href="#"><i class="icon-random"></i> <span>切换虚拟人</span></a></li>
                <li class="divider"></li>
                <li class="old"><a href="#"><i class="icon-exchange"></i> <span>QQ群虚拟人</span></a></li>
                <li class="old_2"><a href="#"><i class="icon-exchange"></i> <span>微信虚拟人</span></a></li>
                <li class="old_3"><a href="#"><i class="icon-exchange"></i> <span>FaceBook虚拟人</span></a></li>
                <li class="old_4"><a href="#"><i class="icon-exchange"></i> <span>Twitter虚拟人</span></a></li>
                <li><a id="logout"><i class="i"></i> 登出 </a></li>
            </ul>
        </div>
    </div>
    <div class="coordinate">
        <!--<i class="icon icon-screenshot"></i>-->
        <img src="/static/images/navpos.png" alt="">
        <b class="coorName"></b>
    </div>
</div>
<div class="modal fade" id="errorInfor" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">错误提示</h4>
            </div>
            <div class="modal-body">
                <div class="coverbody">
                    <p style="text-align: center;font-size: 18px;color: #fff;font-weight: 900;">

                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 10-12 LL===微博  -->
    <!--选择虚拟人 模态框-->
    <div class="modal fade" id="choosePerson" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">系统提示</h4>
                </div>
                <div class="modal-body">
                    <div class="coverbody">
                        <div class="option1">
                            <span>一、请先选择要进入的虚拟人身份</span>
                            <div class="identity" style="padding: 10px 25px;">

                            </div>
                        </div>
                        <div class="option2">
                            <span>二、请先选择虚拟人的显示模式</span>
                            <div class="showType" style="padding: 10px 25px;">
                                <label class="demo-label">
                                    <input class="demo-radio" type="radio" name="choose" value='隐身'>
                                    <span class="demo-checkbox demo-radioInput"></span> 隐身
                                </label>
                                <label class="demo-label">
                                    <input class="demo-radio" type="radio" name="choose" value='昵称可见'>
                                    <span class="demo-checkbox demo-radioInput"></span> 昵称可见
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary sure_in" data-dismiss="modal">确认进入</button>
                    <button type="button" class="btn btn-primary cancel_in" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>
    <!---->
    <!--提示-->
    <div class="modal fade" id="pormpt" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">温馨提示</h4>
                </div>
                <div class="modal-body">
                    <p style="text-align: center;font-size: 18px;color: #fff;font-weight: 900;"></p>
                </div>
            </div>
        </div>
    </div>

<!-- 10-12 LL===QQ -->
    <!--选择虚拟人 模态框-->
    <div class="modal fade" id="choosePerson_2" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">系统提示</h4>
                </div>
                <div class="modal-body">
                    <div class="coverbody">
                        <div class="option1">
                            <span>一、请先选择要进入的QQ号昵称</span>
                            <div class="identity" style="padding: 10px 25px;">

                            </div>
                        </div>
                        <div class="option2">
                            <span>二、请先选择QQ的显示模式</span>
                            <div class="showType" style="padding: 10px 25px;">
                                <label class="demo-label">
                                    <input class="demo-radio" type="radio" name="choose_2" value='隐身'>
                                    <span class="demo-checkbox demo-radioInput"></span> 隐身
                                </label>
                                <label class="demo-label">
                                    <input class="demo-radio" type="radio" name="choose_2" value='昵称可见'>
                                    <span class="demo-checkbox demo-radioInput"></span> 昵称可见
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary sure_in" data-dismiss="modal">确认进入</button>
                    <button type="button" class="btn btn-primary cancel_in" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
<!-- 导航结束 -->

<!-- 主要内容 -->
{% block main %}

{% endblock %}


<!-- JS文件 -->
{% block js %}
<script src="/static/js/jquery-3.1.1.min.js"></script>
<!--<script src="/static/js/jquery.cookie.js"></script>-->
<script src="/static/js/bootstrap.min.js"></script>
<script src="/static/js/bootstrap-table.min.js"></script>
<script src="/static/js/bootstrap-table-zh-CN.min.js"></script>
<script src="/static/js/bootstrap-datetimepicker.min.js"></script>
<script src="/static/js/moment.min.js"></script>
<script src="/static/echarts/echarts.min.js"></script>
<script src="/static/echarts/china.js"></script>
<script>
    //登录用户名
    var admin='admin@qq.com';
    var loginType=localStorage.getItem('loginType');
    //登出
    $('#logout').on('click',function () {
        $.ajax({
            type: 'GET',
            url: "/logout/",
            async: true,
            dataType: "json",
            success: function (data) {}
        });
    });
    setTimeout(function(){
        if(loadingType=='QQ'){
            // ---------10-12 LL向下展开盒子js--QQ
            var L_nav = $('.nav_top');
            $('#LL').empty();
            var LL_html = '<ul><li id="control"><i class="icon icon-cogs"></i>操作控制</li>';
            LL_html += '<li id="warning"><i class="icon icon-eye-open"></i>预警监控</li>';
            LL_html += '<li id="evaluation"><i class="icon icon-sitemap"></i></i>行为评估</li>';
            LL_html += '<li id="reportedmange"><i class="icon icon-share"></i>上报管理</li>';
            LL_html += '<li id="knowledgebase"><i class="icon icon-key"></i>知识库管理</li>';
            LL_html += '<li id="system"><i class="icon icon-inbox"></i>系统管理</li></ul>';
            $('#LL').append(LL_html);

            L_nav.mouseover(function () {
                $(this).find("#LL").stop().slideDown(200);
            });
            L_nav.mouseleave(function(){
                $(this).find("#LL").stop().slideUp(200);
            });
            //页面跳转
            var htmlUrl='';
            $('#control').on('click',function () {
                window.open('/personalCenter/individualQQ/');
            });
            $('#warning').on('click',function () {
                window.open('/inforDetection/inforCheckingQQ/');
            });
            $('#evaluation').on('click',function () {
                window.open('/behavioGauge/behaviorQQ/')
            });
            $('#reportedmange').on('click',function () {
                window.open('/reportManage/management/');
            });
            $('#knowledgebase').on('click',function () {
                window.open('/knowledge/domainLibrary/');
            });
            $('#system').on('click',function () {
                window.open('/systemManage/daily/');
            });
        }else if (loadingType=='weibo'){
            // ---------10-12 LL向下展开盒子js--微博
            var L_nav = $('.nav_top');
            L_nav.mouseover(function () {
                $(this).find("#LL").stop().slideDown(200);
            })
            L_nav.mouseleave(function(){
                $(this).find("#LL").stop().slideUp(200);
            });
            //页面跳转
            $('#personal').on('click',function () {
                window.open('/personalCenter/individual/');
            });
            $('#control').on('click',function () {
                window.open('/control/operationControl/');
            });
            $('#info').on('click',function () {
                window.open('/inforDetection/inforChecking/');
            });
            $('#monitor').on('click',function () {
                window.open('/monitor/characterBehavior/');
            });
            $('#reported').on('click',function () {
                window.open('/behavioGauge/influeAssess/');
            });
            $('#knowledge').on('click',function () {
                window.open('/registered/targetCustom/')
            });
            $('#reportedmange').on('click',function () {
                window.open('/reportManage/management/');
            });
            $('#knowledgebase').on('click',function () {
                window.open('/knowledge/domainLibrary/');
            });
            $('#system').on('click',function () {
                window.open('/systemManage/daily/');
            });
        }else if (loadingType=='WX'){
            // ---------10-30 LL向下展开盒子js--WX
            var L_nav = $('.nav_top');
            $('#LL').empty();
            var LL_html = '<ul><li id="control"><i class="icon icon-cogs"></i>操作控制</li>';
            LL_html += '<li id="warning"><i class="icon icon-eye-open"></i>预警监控</li>';
            LL_html += '<li id="evaluation"><i class="icon icon-sitemap"></i></i>行为评估</li>';
            LL_html += '<li id="reportedmange"><i class="icon icon-share"></i>上报管理</li>';
            LL_html += '<li id="knowledgebase"><i class="icon icon-key"></i>知识库管理</li>';
            LL_html += '<li id="system"><i class="icon icon-inbox"></i>系统管理</li></ul>';
            $('#LL').append(LL_html);

            L_nav.mouseover(function () {
                $(this).find("#LL").stop().slideDown(200);
            });
            L_nav.mouseleave(function(){
                $(this).find("#LL").stop().slideUp(200);
            });
            //页面跳转
            var htmlUrl='';
            // 操作控制
            $('#control').on('click',function () {
                window.open('/personalCenter/individualWX/');
            });
            // 预警监控
            $('#warning').on('click',function () {
                window.open('/inforDetection/inforCheckingWX/');
            });
            // 行为评估
            $('#evaluation').on('click',function () {
                window.open('/behavioGauge/behaviorWX/');
            });

            $('#reportedmange').on('click',function () {
                window.open('/reportManage/management/');
            });
            $('#knowledgebase').on('click',function () {
                window.open('/knowledge/domainLibrary/');
            });
            $('#system').on('click',function () {
                window.open('/systemManage/daily/');
            });
        }else if(loadingType=='twitter'){
            var L_nav = $('.nav_top');
            $('#LL').empty();
            var LL_html =
                '<ul><li id="personal"><i class="icon icon-github-alt"></i>我的虚拟人</li>'+
                '<li id="control"><i class="icon icon-cogs"></i>操作控制</li>'+
                '<li id="info"><i class="icon icon-eye-open"></i>信息监测</li>'+
                '<li id="monitor"><i class="icon icon-warning-sign"></i>预警监控</li>'+
                '<li id="knowledge"><i class="icon icon-user-md"></i>虚拟人定制</li>'+
                '<li id="reported"><i class="icon icon-sitemap"></i>行为评估</li>'+
                '<li id="reportedmange"><i class="icon icon-share"></i>上报管理</li>'+
                '<li id="knowledgebase"><i class="icon icon-key"></i>知识库管理</li>'+
                '<li id="system"><i class="icon icon-inbox"></i>系统管理</li></ul>'
            $('#LL').append(LL_html);
            L_nav.mouseover(function () {
                $(this).find("#LL").stop().slideDown(200);
            });
            L_nav.mouseleave(function(){
                $(this).find("#LL").stop().slideUp(200);
            });
            $('#personal').on('click',function () {
                window.open('/personalCenter/individualTwitter/');
            });
    },2000)
    $(document).ready(function() {
        // 通过该方法来为每次弹出的模态框设置最新的zIndex值，从而使最新的modal显示在最前面
        $(document).on('show.bs.modal', '.modal', function() {
            var zIndex = 1040 + (10 * $('.modal:visible').length);
            $(this).css('z-index', zIndex);
            setTimeout(function() {
                $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
            }, 0);
        });
    });

    //几天前的时间戳
//    function getDaysBefore(m){
//        var date = new Date(),
//            timestamp, newDate;
//        if(!(date instanceof Date)){
//            date = new Date(date);
//        }
//        timestamp = date.getTime();
//        newDate = new Date(timestamp - m * 24 * 3600 * 1000);
//        return Number(Date.parse(newDate).toString().substring(0,10));
//    };
    function getDaysBefore($time) {
        var a=new Date(new Date(new Date().setDate(new Date().getDate()-Number($time))).setHours(0,0,0,0));
        var b=Date.parse(a)/1000;
        return b;
    }
    //当天零点的时间戳
    function todayTimetamp() {
        var start=new Date();
        start.setHours(0);
        start.setMinutes(0);
        start.setSeconds(0);
        start.setMilliseconds(0);
        var todayStartTime=Date.parse(start)/1000;
        return todayStartTime;
    }
    //时间戳转时间
    function getLocalTime(nS) {
        return new Date(parseInt(nS) * 1000).toLocaleString().replace(/年|月/g, "-").replace(/日|上午|下午/g, " ");
    }
    //去除空格
    function delSpace(str){
        var str=str.replace(/<\/?[^>]*>/gim,"");//去掉所有的html标记
        var result=str.replace(/(^\s+)|(\s+$)/g,"");//去掉前后空格
        return  result.replace(/\s/g,"");//去除文章中间空格
    }
    //判断字符串中某个字符出现的次数
    function patch(re,s){ //参数1正则式，参数2字符串
        re=eval("/"+re+"/ig"); //不区分大小写，如须则去掉i,改为 re=eval_r("/"+re+"/g")
        var len = s.match(re).length;
        return len;
    }
    //判断空对象
    function isEmptyObject(e) {
        var t;
        for (t in e)
            return !1;
        return !0
    }
    //删除数组指定项
    Array.prototype.removeByValue = function(val) {
        for(var i=0; i<this.length; i++) {
            if(this[i] == val) {
                this.splice(i, 1);
                break;
            }
        }
    };
    //清除所有存储
    var ISclear;
    setTimeout(function () {
        localStorage.clear();
        ISclear='clear';
    },21600000);


    //ajax请求
    var public_ajax={
        call_request:function(ajax_method,url,callback) {
            $.ajax({
                type:ajax_method,
                url:url,
                async:true,
                //timeout:300,
                //data:{"name":"xm"},//传参数
                dataType:"json",
                success:callback,
                error:function (xhr,textStatus,errorThrown) {
                    //请求失败执行的函数
                    console.log("请求失败",textStatus,errorThrown);
                    var errorHtml='请求失败！！可能是因为服务器速度太慢或者网络原因导致。（刷新重试）';
                    if (ISclear=='clear'){
                        errorHtml='登录过期，请清除缓存，重新登录。';
                        ISclear='againSet';
                    }
                    $('#errorInfor p').text(errorHtml);
                    $('#errorInfor').modal('show');
                },
                global:false//是否触发全局请求,需要触发就是true,不需要false
            });
        },
    };
    //切换虚拟人
    $('.change').on('click',function () {
        var THEmid='/weibo_xnr_create/show_weibo_xnr/';
        // var THEmid;
        if (loadingType=='weibo'){
            THEmid='/weibo_xnr_create/show_weibo_xnr/';
        }else if (loadingType=='QQ'){
            THEmid='/qq_xnr_manage/show_qq_xnr/';
        }else if(loadingType=='WX'){
            THEmid='/wx_xnr_manage/show/';
        }
        var THEurl=THEmid+"?submitter="+admin;
        public_ajax.call_request('GET',THEurl,addXnr)
        $('#choosePerson').modal('show');
    });
    function addXnr(data) {
        var str='';
        if (loadingType=='QQ'){
            $.each(data,function (index,item) {
                var name;
                if (item.nickname==''||item.nickname=='unknown'||!item.nickname){
                    name='无昵称';
                }else {
                    name=item.nickname;
                }
                str+=
                    '<label class="demo-label" title="'+name+'">'+
                    '   <input class="demo-radio" type="radio" name="ID" valueNum="'+item.qq_number+'" valueID='+item.xnr_user_no+' valueName='+name+'>'+
                    '   <span class="demo-checkbox demo-radioInput"></span> '+name+'（'+item.qq_number+'）'+
                    '</label>';
            });
        }else if(loadingType=='weibo'){
            for (var k in data){
                if (data[k]==''||data[k]=='unknown'){
                    data[k]='无昵称';
                }
                str+=
                    '<label class="demo-label" title="'+data[k]+'">'+
                    '   <input class="demo-radio" type="radio" name="ID" valueID='+k+' valueName='+data[k]+'>'+
                    '   <span class="demo-checkbox demo-radioInput"></span> '+data[k]+
                    '</label>';
            }
        }else if(loadingType=='WX'){
            $.each(data,function (index,item) {
                var name;
                if (item.wx_id==''||item.wx_id=='unknown'||!item.wx_id){
                    name='无昵称';
                }else {
                    name=item.wx_id;
                }
                str+=
                    '<label class="demo-label" title="'+name+'">'+
                    '   <input class="demo-radio" type="radio" name="ID" valueNum="'+item.wxbot_id+'" valueID='+item.wxbot_id+' valueName='+name+'>'+
                    '   <span class="demo-checkbox demo-radioInput"></span> '+name+'（'+item.wxbot_id+'）'+
                    '</label>';
            });
        }
        $('#choosePerson .identity').html(str);
    }
    $('#choosePerson .sure_in').on('click',function () {
        if (loadingType=='QQ'){
            var userQQID=$('input:radio[name="ID"]:checked').attr('valueID');
            var userQQName=$('input:radio[name="ID"]:checked').attr('valueName');
            var userQQnum=$('input:radio[name="ID"]:checked').attr('valueNum');
            var userType=$('input:radio[name="choose"]:checked').val();
            if (!userQQID||!userQQName||!userType){
                $('#pormpt p').text('请检查选择登陆的QQ显示模式。');
                $('#pormpt').modal('show');
            }else {
                var id_or_name='';
                if (userType=='隐身'){
                    id_or_name=userQQID;
                }else {
                    id_or_name=userQQName;
                }
                localStorage.setItem('userQQ',encodeURI(userQQID));
                localStorage.setItem('userQQRelName',encodeURI(userQQName));
                localStorage.setItem('userQQnum',encodeURI(userQQnum));
                localStorage.setItem('userQQName',encodeURI(id_or_name));
            }
        }else if (loadingType=='weibo'){
            var userID=$('input:radio[name="ID"]:checked').attr('valueID');
            var userName=$('input:radio[name="ID"]:checked').attr('valueName');
            var userType=$('input:radio[name="choose"]:checked').val();
            if (!userID||!userName||!userType){
                $('#pormpt p').text('请检查选择登陆的虚拟人显示模式。');
                $('#pormpt').modal('show');
            }else {
                var id_or_name='';
                if (userType=='隐身'){
                    id_or_name=userID;
                }else {
                    id_or_name=userName;
                }
                localStorage.setItem('user',encodeURI(userID));
                localStorage.setItem('userRelName',encodeURI(userName));
                localStorage.setItem('userName',encodeURI(id_or_name));
            }
        }else if (loadingType=='WX'){
            var userWXID=$('input:radio[name="ID"]:checked').attr('valueID');
            var userWXName=$('input:radio[name="ID"]:checked').attr('valueName');

            var userType=$('input:radio[name="choose"]:checked').val();
            if (!userWXID||!userWXName||!userType){
                $('#pormpt p').text('请检查选择登陆的微信显示模式。');
                $('#pormpt').modal('show');
            }else {
                var id_or_name='';
                if (userType=='隐身'){
                    id_or_name=userWXID;
                }else {
                    id_or_name=userWXName;
                }
                localStorage.setItem('userWX',encodeURI(userWXID));
                localStorage.setItem('userWXRelName',encodeURI(userWXName));
                // localStorage.setItem('userQQnum',encodeURI(userQQnum));
                localStorage.setItem('userWXName',encodeURI(id_or_name));
            }
        }
        location.reload();
    });
    //登录虚拟人后取出ID或者名字
    var ID_Num,REL_name,ID_name,userQQnum,nowUser;

    function weiboORqq(type) {
        if (type=='weibo'){
            ID_Num=localStorage.getItem('user');
            REL_name=localStorage.getItem('userRelName');
            ID_name=localStorage.getItem('userName');
            if (ID_name){
                nowUser=decodeURI(ID_name);
            }
            InloginName('微博虚拟人','（微博）');
        }else if(type=="QQ") {
            ID_Num=localStorage.getItem('userQQ');
            REL_name=localStorage.getItem('userQQRelName');
            ID_name=localStorage.getItem('userQQName');
            userQQnum=localStorage.getItem('userQQnum');
            if (ID_name){
                nowUser=decodeURI(ID_name)+'（'+userQQnum+')';
            }
            InloginName('QQ群虚拟人','（QQ群）');
        }else if(type=="WX") {
            ID_Num=localStorage.getItem('userWX');
            REL_name=localStorage.getItem('userWXRelName');
            ID_name=localStorage.getItem('userWXName');
            // userQQnum=localStorage.getItem('userQQnum');
            if (ID_name){
                // nowUser=decodeURI(ID_name)+'（'+userQQnum+')';
                nowUser=decodeURI(ID_name);
            }
            InloginName('微信虚拟人','（微信）');
        }else if(type=="twitter") {
            ID_Num=localStorage.getItem('userTW');
            REL_name=localStorage.getItem('userTWRelName');
            ID_name=localStorage.getItem('userTWName');
            if (ID_name){
                nowUser=decodeURI(ID_name);
            }
            InloginName('Twitter虚拟人','（Twitter）');
        }
    }

    // ===切换虚拟人类型===
    // $('.old').on('click',function(e) {
    //     var txt=$(this).find('span').text();
    //     var curtxt=$('.current').find('span').text();
    //     $(this).find('span').text(curtxt);
    //     $('.current').find('span').text(txt);
    //     $('.nav_type').text('（'+txt+'）');
    //     if (txt=='微博虚拟人'){
    //         window.open('/index/navigation/');
    //     }else if(txt=='QQ群虚拟人') {
    //         window.open('/index/navigationQQ/');
    //     }else if(txt=='微信虚拟人'){
    //         window.open('/index/navigationWX/');
    //     }
    // });
    $('.old').on('click',Change);
    $('.old_2').on('click',Change);
    $('.old_3').on('click',Change);
    $('.old_4').on('click',Change);
    function Change(){
        var txt=$(this).find('span').text();
        // var curtxt=$('.current').find('span').text();
        // $(this).find('span').text(curtxt);
        // $('.current').find('span').text(txt);
        // $('.nav_type').text('（'+txt+'）');
        if (txt=='微博虚拟人'){
            window.open('/index/navigation/');
        }else if(txt=='QQ群虚拟人') {
            window.open('/index/navigationQQ/');
        }else if(txt=='微信虚拟人'){
            window.open('/index/navigationWX/');
        }else if(txt=='FaceBook虚拟人'){
            window.open('/index/navigationFaceBook/');
        }else if(txt=='Twitter虚拟人'){
            window.open('/index/navigationTwitter/');
        }
    }
//    var loginType=localStorage.getItem('loginType');
//    if (loginType=='weibo'){
//        InloginName('/index/navigation/','微博虚拟人','QQ群虚拟人','（微博）');
//    }else {
//        InloginName('/index/navigationQQ/','QQ群虚拟人','微博虚拟人','（QQ群）');
//    }

    //点击首页
    $('#backHome').on('click',function () {
        var lf=$('.loadingUser').find('.nav_type').text();
        if (lf=='（QQ群）'){
            $('#backHome .list_one.li_a').attr('href','/index/navigationQQ/');
        }else if(lf=='（微博）') {
            $('#backHome .list_one.li_a').attr('href','/index/navigation/');
        }else if(txt=='（微信）'){
            $('#backHome .list_one.li_a').attr('href','/index/navigationWX/');
        }else if(lf=='（Twitter）') {
            $('#backHome .list_one.li_a').attr('href','/index/navigationTwitter/');
        }else if(lf=='（FaceBook）') {
            $('#backHome .list_one.li_a').attr('href','/index/navigationFaceBook/');
        }else{
            $('#backHome .list_one.li_a').attr('href','/index/navigation/');
        }
    });
    var _$xnrList=['微博虚拟人', 'QQ群虚拟人', '微信虚拟人', 'FaceBook虚拟人', 'Twitter虚拟人'];
    function InloginName(one,two) {
        $('.current').find('span').text(one);
        _$xnrList.removeByValue(one);
        $('.old').find('span').text(_$xnrList[0]);
        $('.old_2').find('span').text(_$xnrList[1]);
        $('.old_3').find('span').text(_$xnrList[2]);
        $('.old_4').find('span').text(_$xnrList[3]);
        $('.loadingUser .nav_name').text(nowUser);
    }
    //存  localStorage.setItem('TYPE','1');
    //取  var typeNum=localStorage.getItem('TYPE');
    //删除 localStorage.removeItem(i);
    function judgment(typeNum){
        typeNum=Number(typeNum);
        var afterEle='';
        if (typeNum==1){
            $('.coorName').text('个人中心');
            $('.xnrShowHide').hide();
        }else if (typeNum==2){
            $('.coorName').text('操作控制');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/operationControl/">'+
                '        <i class="icon icon-user"></i>&nbsp;虚拟人中心' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/posting/">' +
                '        <i class="icon icon-pencil"></i>&nbsp;发帖操作' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/socialFeedback/">' +
                '        <i class="icon icon-random"></i>&nbsp;社交反馈' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/activeSocialization/">' +
                '        <i class="icon icon-headphones"></i>&nbsp;主动社交' +
                '    </a>'+
                '</li>';
        }else if (typeNum==3){
            $('.coorName').text('信息监测');
        }else if (typeNum==4){
            $('.coorName').text('预警监控');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/characterBehavior/">' +
                '        <i class="icon icon-user-md"></i>&nbsp;人物行为预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/speechContent/">' +
                '        <i class="icon icon-comment-alt"></i>&nbsp;言论内容预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/eventEmerges/">' +
                '        <i class="icon icon-bullhorn"></i>&nbsp;事件涌现预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/timeWarning/">' +
                '        <i class="icon icon-time"></i>&nbsp;时间预警' +
                '    </a>'+
                '</li>';
        }else if (typeNum==5){
            $('.coorName').text('行为评估');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/influeAssess/">' +
                '        <i class="icon icon-lightbulb"></i>&nbsp;影响力评估' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/penetration/">' +
                '        <i class="icon icon-tint"></i>&nbsp;渗透力评估' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/safe/">' +
                '        <i class="icon icon-glass"></i>&nbsp;安全性评估' +
                '    </a>'+
                '</li>';
        }else if (typeNum==6){
            $('.coorName').text('虚拟人定制');
            $('.xnrShowHide').hide();
        }else if (typeNum==7){
            $('.coorName').text('上报管理');
            $('.xnrShowHide').hide();
        }else if (typeNum==8){
            $('.coorName').text('知识库管理');
            $('.xnrShowHide').hide();
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/domainLibrary/">' +
                '        <i class="icon icon-globe"></i>&nbsp;领域知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/characterLibrary/">' +
                '        <i class="icon icon-github"></i>&nbsp;角色知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/businessLibrary/">' +
                '        <i class="icon icon-glass"></i>&nbsp;业务知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/speechLibrary/">' +
                '        <i class="icon icon-comment"></i>&nbsp;言论知识库' +
                '    </a>'+
                '</li>';
        }else if (typeNum==9){
            $('.coorName').text('系统管理');
            $('.xnrShowHide').hide();
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/daily/">' +
                '        <i class="icon icon-lightbulb"></i>&nbsp;日志管理' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/purview/">' +
                '        <i class="icon icon-tint"></i>&nbsp;权限管理' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/virtual/">' +
                '        <i class="icon icon-glass"></i>&nbsp;虚拟人管理' +
                '    </a>'+
                '</li>';
        };
        $('.behind').html(afterEle);
    };

    function judgmentTwitter(typeNum) {
        typeNum=Number(typeNum);
        var afterEle='';
        if (typeNum==1){
            $('.coorName').text('个人中心');
            $('.xnrShowHide').hide();
        }else if (typeNum==2){
            $('.coorName').text('操作控制');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/operationTwitter/">'+
                '        <i class="icon icon-user"></i>&nbsp;虚拟人中心' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/postingTwitter/">' +
                '        <i class="icon icon-pencil"></i>&nbsp;发帖操作' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/socialFeedbackTwitter/">' +
                '        <i class="icon icon-random"></i>&nbsp;社交反馈' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/control/activeSocializationTwitter/">' +
                '        <i class="icon icon-headphones"></i>&nbsp;主动社交' +
                '    </a>'+
                '</li>';
        }else if (typeNum==3){
            $('.coorName').text('信息监测');
        }else if (typeNum==4){
            $('.coorName').text('预警监控');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/characterBehaviorTwitter/">' +
                '        <i class="icon icon-user-md"></i>&nbsp;人物行为预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/speechContentTwitter/">' +
                '        <i class="icon icon-comment-alt"></i>&nbsp;言论内容预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/eventEmergesTwitter/">' +
                '        <i class="icon icon-bullhorn"></i>&nbsp;事件涌现预警' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/monitor/timeWarningTwitter/">' +
                '        <i class="icon icon-time"></i>&nbsp;时间预警' +
                '    </a>'+
                '</li>';
        }else if (typeNum==5){
            $('.coorName').text('行为评估');
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/influeAssess/">' +
                '        <i class="icon icon-lightbulb"></i>&nbsp;影响力评估' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/penetration/">' +
                '        <i class="icon icon-tint"></i>&nbsp;渗透力评估' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/behavioGauge/safe/">' +
                '        <i class="icon icon-glass"></i>&nbsp;安全性评估' +
                '    </a>'+
                '</li>';
        }else if (typeNum==6){
            $('.coorName').text('虚拟人定制');
            $('.xnrShowHide').hide();
        }else if (typeNum==7){
            $('.coorName').text('上报管理');
            $('.xnrShowHide').hide();
        }else if (typeNum==8){
            $('.coorName').text('知识库管理');
            $('.xnrShowHide').hide();
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/domainLibrary/">' +
                '        <i class="icon icon-globe"></i>&nbsp;领域知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/characterLibrary/">' +
                '        <i class="icon icon-github"></i>&nbsp;角色知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/businessLibrary/">' +
                '        <i class="icon icon-glass"></i>&nbsp;业务知识库' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/knowledge/speechLibrary/">' +
                '        <i class="icon icon-comment"></i>&nbsp;言论知识库' +
                '    </a>'+
                '</li>';
        }else if (typeNum==9){
            $('.coorName').text('系统管理');
            $('.xnrShowHide').hide();
            afterEle=
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/daily/">' +
                '        <i class="icon icon-lightbulb"></i>&nbsp;日志管理' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/purview/">' +
                '        <i class="icon icon-tint"></i>&nbsp;权限管理' +
                '    </a>'+
                '</li>'+
                '<li class="main_li">'+
                '    <a class="li_a" href="/systemManage/virtual/">' +
                '        <i class="icon icon-glass"></i>&nbsp;虚拟人管理' +
                '    </a>'+
                '</li>';
        };
        $('.behind').html(afterEle);
    }
</script>
{% endblock %}


{% block write_js %}
<script>

</script>
{% endblock %}

<!-- 自己的JS -->
{% block my_js %}

{% endblock %}

</body>
</html>